.. index:: OtherObject（オブジェクトの操作）
.. index:: オブジェクト（オブジェクトの操作）

####################################
OtherObject
####################################


　OtherObjectは基本的にはVRoid/VRM以外の一般的な3Dモデルを扱います。OtherObjectを始め、VRoid/VRM以外はIKマーカーは1つのオブジェクトにつき1個のみです。

.. contents::


.. image:: ../img/operation_oobj_1.png
    :align: center

　表示サイズはその3Dオブジェクトの実際のサイズに沿うので、VRoid/VRMや他のオブジェクトと大きく違う可能性があります。その場合は「共通」タブの「倍率」プロパティで変更してください。

　IKマーカーはその **オブジェクトの原点** に付きます。Blenderなどで出力時に実際のオブジェクトと原点がズレていると本アプリ上でもIKマーカーと実際のオブジェクトがズレます。意図したズレでない場合は出力元のアプリ側で適切に修正してください。


.. note::
    | ※FBXなど、アニメーションデータを持つ3Dオブジェクトは本アプリでも再生可能です。
    | ※ただし、利用ライブラリの仕様によりアニメーションの再生や選択に制限がかかる場合があります。


|

.. index:: アニメーション再生（OtherObject）

アニメーション再生
---------------------

　3Dオブジェクトのアニメーションは本アプリによるアニメーションプロジェクトの中でも再生をコントロールできます。


    
.. |preview| image:: ../img/operation_oobj_2.png
.. |anireg| image:: ../img/operation_oobj_3.png

.. csv-table::

    プレビュー再生, アニメーション登録用
    |preview|, |anireg|
    即座に再生されます。こちらの操作はキーフレームには登録されません。, 「再生」や「停止」を選択後にキーフレームに登録します。

1. 再生するアニメーション名を選択します。
2. 必要に応じて再生モード・アニメーション速度などを調整します。 
3. 再生して確認します。
4. よければアニメーションの状態（登録用）で再生状態を選び、キーフレームの登録をします。

.. note::
    ※キーフレームに3Dオブジェクトのアニメーションデータが展開・表示されるわけではなく、あくまで再生・一時停止・停止・シークという状態がキーフレームに登録されるのみです。

.. hint::
    再生や停止ではなく、再生位置変更でシーク位置を変えることだけをキーフレームに登録していっても、そのオブジェクトのアニメーション再生を自由に行なえます。

    .. code::

        例）あるアニメーションを持つFBXをOtherObjectにした

        1フレーム目: アニメーションの状態（登録用） = 再生位置変更、シーク位置 = 0.855時点

        2フレーム目: アニメーションの状態（登録用） = 再生位置変更、シーク位置 = 0.124時点、間隔(duration)は1秒。

        → このFBXは逆再生のようにアニメーションする。

|

.. index:: テクスチャ（OtherObject）

テクスチャ
----------------

　3Dオブジェクトがテクスチャを複数保持している場合、テクスチャを選んで細かく設定変更することができます。VRMのほうの設定と全く同じです。

.. image:: ../img/prop_obj_1.png
    :align: center

|

1. マテリアルが複数存在する場合は上部のコンボボックスから対象のマテリアルを選択します。

※テクスチャの設定の内容が切り替わります。

2. 各種設定を好みで変更します。

:シェーダー:
    ``Standard`` ,  ``VRM/MToon`` , ``Water`` のいずれかを選択します。
:色:
    テクスチャのベースの色を変更します。
:カリングモード:
    ``Off``、 ``Front``、 ``Back`` のいずれかを選択します。
:ブレンドモード:
    ``Opaque``、 ``Cutout``、 ``Fade``、 ``Transparent`` のいずれかを選択します。
:メタリック～Rim Fresnel Power:
    それぞれ必要に応じて調整します。
:SrcBlend～DstBlend:
    色と透過を複合的に変化させて適用します。詳しくはVRM/MToonの解説サイトを検索してください。
:テクスチャの種類:
    ``ファイルから``、あるいは ``カメラから`` を選択します。いずれの場合も ``--`` を選ぶと参照を解除できます。

    ファイルから [1]_ 
        別途読み込み済みのテクスチャファイルに付けた素材名を選択して読み込みます。元のテクスチャに戻す場合は ``--`` を選択してください。
    カメラから [2]_ 
        プロジェクトに存在するカメラオブジェクトを選択します。別途カメラオブジェクト側でレンダーテクスチャの設定をしておく必要があります。
:フレネルスケール～波方向CD:
    ``Water`` の場合、水面の色・反射の色、波の頻度やサイズなどを変化させます。[3]_ 

.. hint::
    .. [1] リボンバーの ``アニメーション`` タブ → ``設定`` ボタン → ``素材`` タブ　にて必要なテクスチャファイルを事前に読み込んでください。
    .. [2] Cameraオブジェクトで事前にレンダーテクスチャを設定しておいてください。
    .. [3] https://docs.unity3d.com/ja/2019.1/Manual/HOWTO-Water.html


.. caution::
   * テクスチャの変更はこのアプリの使用中のみで実際には変更されません。
   * 各色のプロパティの不透明度はWebGLの場合適切に反映されません。ご了承ください。
   * 同じマテリアルを使用しているテクスチャ（メッシュ）が複数ある場合、アニメーションプロジェクトにおいてはその最後のテクスチャの設定のみが最終的に反映されます。（例: Aというマテリアルを使用しているテクスチャが3つ存在する場合、3番目の設定が最後に適用される）
