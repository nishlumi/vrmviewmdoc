####################################
オブジェクト操作の基本
####################################

.. contents::


.. index:: オブジェクトを開く

オブジェクトを開く
====================

1. リボンバーのホームタブあるいは3Dモデルタブから各ボタンを押してください。


.. |ribbon_home| image:: ../img/operation_initial_3.png
.. |ribbon_model| image:: ../img/operation_initial_4.png

==============  ===================
ホームタブ          3Dモデルタブ
--------------  -------------------
|ribbon_home|   |ribbon_model|
==============  ===================

VRMの場合
    　読み込み後、利用条件確認画面（VRM情報画面）が表示されます。そこで許可をしないと本当には読み込まれません。

OtherObjectの場合
    　一般的なFbxやobjなどを開く際、そのままをファイルダイアログで指定しても開くことができますが、テクスチャなど必要なファイルが複数存在することがあります。

    　本アプリでは利用ライブラリの効果により、たとえばzipファイルのままでも読み込むことが可能です。

    例：
    .obj、.mtl、.png等をまとめて1つのzipファイルにする

    そうして作成したzipファイルを本アプリで読み込むことで正常にテクスチャ等がついた状態で読み込むことができます。

    .. warning::
        3Dモデルファイルであらかじめ適切にテクスチャの設定がされている必要があります。


それ以外
    　読み込み後、すぐに表示されます。


.. note::
    | ※エクスプローラーやファイラーから目的のVRMファイルをWebGL画面へとドラッグアンドドロップして開くこともできます。
    | ※設定「開いたファイルを履歴に保存する」により、一度開いた各オブジェクトは履歴が残るようになります。

|

.. index:: 基本の図形

シンプルな形のオブジェクト
==============================

　OtherObject扱いになる、基本的な形のオブジェクトを追加することができます。


1. リボンバーの3Dモデルタブから「基本の図形」をクリックします。

.. image:: ../img/operation_initial_5.png
    :align: center

|

※基本の図形は次の種類を開くことができます。

::

    球、カプセル、円柱、立方体、平面（3D）、四辺形（2D）、水面

.. admonition:: 特殊な水面オブジェクト

    水面オブジェクトは常に波がアニメーションして動き続ける特殊なオブジェクトです。

    .. image:: ../img/operation_initial_6.png
        :align: center

    |

    テクスチャのプロパティも非常に多いですが、その分細かく設定すれば水面・海面だけでなく他の用途でも表現できるでしょう。うまく活用してください。

.. hint::
    基本の図形のテクスチャのプロパティで **Cutout** シェーダーを使うと、VR/AR空間で現実の壁や物に合わせて3Dモデルを配置して演出できるようになります。MetaQuest3などの標準の設定にあるような現実を認識しているかのような効果を簡単に付けられます。

    詳しくは :ref:`real_object` を参照してください。


|

.. index:: 
    履歴から開く
    履歴を絞り込む

履歴から開く
======================

　VRM・OtherObject、画像（UI画像含む）は一度開くとアプリ内に履歴が保存されます。次回起動時にはわざわざダイアログをたどったりドラッグしなくても、アプリ内で履歴から開くことができます。

1. リボンバーの「ホーム」タブにあるHistoryをクリックし、対象のオブジェクトの種類を選びます。

.. image:: ../img/operation_vrm_2.png
    :align: center

2. 内部ストレージダイアログが開くので対象のオブジェクトを選び、開きます。

.. hint::
    履歴から開く際は一覧上部の検索ボックスに入力すると、対象のファイルを絞り込むことができます。

     .. image:: ../img/operation_initial_7.png
        :align: center

.. index:: 履歴を削除する

履歴を削除する
=====================

　貯まりすぎた履歴を削除できます。

.. |histdelbtn| image:: ../man4/img/loadsave_9.png

**個別に削除する**

1. 削除したいオブジェクトにチェックを入れます。
2. 内部ストレージダイアログの上部にある |histdelbtn| をクリックします。

|

**すべて削除する**

1. リボンバーのホームタブにある ``設定`` を押します。
2. ファイルタブにある ``Clear`` を押してください。


|

.. index::
    サンプルデータ(VRM)
    サンプルデータ(OtherObject)
    サンプルデータ(Image)


アプリのサンプルデータを開く
========================================

リボンバーの ``VRM`` , ``OtherObject`` , ``Image`` では、端末やGoogleドライブからの他、アプリのサーバに保存しているサンプルデータを開くことも出来ます。

サンプルデータは随時追加予定です。

それぞれ、ストレージダイアログが開いて一覧で選ぶことができます。

.. index:: オブジェクトの選択

オブジェクトの選択
============================

　全ての3Dオブジェクトは操作可能な状態になるとIKマーカーが表示されます。操作可能な状態にするには、オブジェクト一覧で選択してください。（TextとUImageは選択してもIKマーカーは表示されません）


.. image:: ../img/operation_initial_1.png
    :align: center

| 

※該当のオブジェクトが操作可能になるとIKマーカーがこのように表示されます。（それ以外のオブジェクトのIKマーカーは非表示になります。


.. warning::
    VRoid/VRMに装着中のオブジェクトは選択してもIKマーカーは表示されません。再び操作可能にするには装着を解除してください。

|

.. index:: オブジェクトの削除

オブジェクトの削除
==========================

オブジェクトを削除するには、オブジェクト一覧で右クリックして「オブジェクトを削除」をクリックします。

.. image:: ../img/operation_initial_2.png
    :align: center

|

.. note::
    この方法ではアニメーションプロジェクトのタイムライン（ロール）を削除することはできません。オブジェクトとタイムライン（ロール）両方を削除する場合は :doc:`../man4/animation_proper` を参照してください。


|

.. index:: オブジェクトの名前変更

オブジェクトの名前変更
=================================

オブジェクトの名前を変更することができます。これは後述のタイムライン（ロール）の名称とは別で、オブジェクト自体の名前・タイトルのことです。

1. オブジェクト一覧で対象を右クリックし、「名前変更」をクリックします。
2. 入力ダイアログで入力し、OKボタンを押して決定します。

|

.. index:: カメラをフォーカスする

カメラをフォーカスする
===============================

対象のオブジェクトがなるべくメインカメラに収まるようカメラの位置・回転を調整します。

1. オブジェクト一覧で対象を右クリックし、「カメラをフォーカスする」をクリックします。


.. index:: このオブジェクトとロールを両方削除する

このオブジェクトとロールを両方削除する
==============================================

オブジェクトの削除とは異なり、オブジェクト自体とロール（タイムライン）の両方を削除します。

キーフレームを登録したタイムライン（ロール）を消したくないなど、よほど特別な理由がない限りは ``このオブジェクトとロールを両方削除する`` で削除することをオススメします。

1. オブジェクト一覧で対象を右クリックし、「このオブジェクトとロールを両方削除する」をクリックします。

|

.. index::
    オブジェクトの移動
    オブジェクトの回転
    オブジェクトの倍率

オブジェクトの移動と回転・倍率変更
============================================

全てのオブジェクトは共通プロパティが使用可能です。ここでは 移動・回転・倍率を行うことができます。

.. |prop3d| image:: ../img/prop_common_1.png
.. |prop2d| image:: ../img/prop_common_2.png

.. csv-table::
    :align: center

    3Dオブジェクト, 2Dオブジェクト
    |prop3d|, |prop2d|

|

.. index::
    移動・回転・倍率
    キーボードによる操作

3Dオブジェクト
---------------------

    3DオブジェクトはそれぞれX, Y, Z 軸で操作をします。ここでの移動・回転はオブジェクト自体となります。(VRMは体の各部位のIKは対象外です)

    同様の操作方法として、IKマーカーをクリックして表示される操作ハンドルもあります。

    キーボード操作にも対応しています。詳しい操作方法は :doc:`../man5/special_operation` をご覧ください。

    .. warning::
        キーボード操作できるオブジェクトの種類は3Dオブジェクトのみです。 ``Text`` と ``UImage`` はキーボード操作 **対象外** です。

|

    .. index:: 360度回転（3Dオブジェクトの操作）

    360度回転を考慮
        ``360度回転を考慮`` をONにするとその回転角度になる際に可能な限り一回転しようとします。たとえば、Y軸を次のようにするとします。

        .. csv-table::
            :header-rows: 1
            :align: center

            frame, Y軸の回転角度
            1, 0
            10, 359
        
        　このオプションをOFFにしてキーフレーム登録した場合、0度から時計回り・反時計回りを考慮して角度を即座に切り替えるのみです。ONの場合、2～9フレームの間は例えば 10..30..50..185..200.. というように一回転しようと試みます。

        * ただし、本アプリの回転の内部仕様上、 0から360度は回転できません。一旦359度まで回転し、その後359から360度に回転するよう次のフレームでキーフレーム登録してください。その際、 ``360度回転を考慮`` をOFFにして登録する必要があります。

        .. warning::
            このオプションはモーションデータとしては保持されません。あくまでもキーフレーム登録時のオプションです。オブジェクトの選択を切り替えたりするとこのトグルはOFFに戻ります。

    .. index:: 比率を固定（3Dオブジェクトの操作）
    
    比率を固定
        　倍率もX, Y, Zを指定しますが、比率を固定することもできます。 ``比率を固定`` をONにすると入力欄が1つになります。この状態で入力すると現在の比率を保ったまま大きさを変更することができます。

    ジャンプ・揺れ
        オブジェクト自体の位置・回転にかかわるオプションとして、ジャンプと揺れの機能があります。

        ジャンプは回数が ``1以上`` の場合に機能します。

        直線的な揺れとランダムな揺れはそれぞれが ``On`` の場合のみ機能します。

2Dオブジェクト
----------------------

    2Dオブジェクトは Unityエディタとは異なり、わかりやすさを考慮して入力欄を制限しています。

    位置はX, Y、回転はZ軸のみです。

    サイズ
        3Dオブジェクトと異なり、描画される領域の大きさを示します。

    倍率
        3Dオブジェクトと同様の意味の大きさです。